{% extends "base.html" %}
{% block title %}Edit Product | Admin{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}

{% block content %}

<section class="admin-section">

    <div class="admin-card">

        <div class="admin-header">
            <h2>Edit Product</h2>
            <p>Update product details and inventory.</p>
        </div>

        <form method="POST" enctype="multipart/form-data" class="admin-form">

            <!-- Product Name -->
            <div class="form-group">
                <label for="name">Product Name</label>
                <input
                    id="name"
                    name="name"
                    type="text"
                    value="{{ product.name }}"
                    required
                >
            </div>

            <!-- Price -->
            <div class="form-group">
                <label for="price">Price (â‚¹)</label>
                <input
                    id="price"
                    name="price"
                    type="number"
                    step="0.01"
                    value="{{ product.price }}"
                    required
                >
            </div>

            <!-- Stock -->
            <div class="form-group">
                <label for="stock">Stock</label>
                <input
                    id="stock"
                    name="stock"
                    type="number"
                    value="{{ product.stock }}"
                    required
                >
            </div>

            <!-- Category -->
            <div class="form-group">
                <label for="category">Category</label>
                <input
                    id="category"
                    name="category"
                    type="text"
                    value="{{ product.category or 'General' }}"
                >
            </div>

            <!-- Description -->
            <div class="form-group">
                <label for="description">Description</label>
                <textarea
                    id="description"
                    name="description"
                    rows="4"
                    required
                >{{ product.description or '' }}</textarea>
            </div>

            <!-- Existing Image Preview -->
            {% if product.image %}
            <div class="form-group">
                <label>Current Image</label>
                <div class="image-preview">
                    <img
                        src="{{ url_for('static', filename='uploads/' ~ product.image) }}"
                        alt="{{ product.name }}"
                    >
                </div>
            </div>
            {% endif %}

            <!-- Upload New Image -->
            <div class="form-group">
                <label for="image">Update Product Image</label>
                <input
                    id="image"
                    name="image"
                    type="file"
                    accept="image/*"
                >
            </div>

            <!-- New Arrival -->
            <div class="form-group checkbox-group">
                <input
                    type="checkbox"
                    id="is_new"
                    name="is_new"
                    {% if product.is_new %}checked{% endif %}
                >
                <label for="is_new">Mark as New Arrival</label>
            </div>

            <div class="admin-actions-row">
                <button type="submit" class="btn-admin">
                    Update Product
                </button>

                <a href="{{ url_for('admin.list_products') }}" class="btn-admin-secondary">
                    Back to Products
                </a>
            </div>

        </form>

    </div>

</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}
