{% extends "base.html" %}
{% block title %}Your Cart | Kuckoo Boo & mama!{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cart.css') }}">
{% endblock %}

{% block content %}

<section class="cart-section">

    <div class="cart-header">
        <h1>Your Cart</h1>
    </div>

    {% if session.get("cart_error") %}
        <p class="error">{{ session.pop("cart_error") }}</p>
    {% endif %}

    {% if cart %}

    <div class="table-wrapper">
        <table class="cart-table">

            <thead>
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody>
                {% for product_id, item in cart.items() %}
                <tr>

                    <td class="product-name">
                        {{ item.name }}
                    </td>

                    <td>₹ {{ item.price }}</td>

                    <td>
                        <div class="qty-control">
                            <a href="{{ url_for('cart.decrease_quantity', product_id=product_id) }}" class="qty-btn">−</a>
                            <span>{{ item.quantity }}</span>
                            <a href="{{ url_for('cart.increase_quantity', product_id=product_id) }}" class="qty-btn">+</a>
                        </div>
                    </td>

                    <td class="item-total">
                        ₹ {{ item.price * item.quantity }}
                    </td>

                    <td>
                        <a href="{{ url_for('cart.remove_from_cart', product_id=product_id) }}"
                           class="remove-link">
                            Remove
                        </a>
                    </td>

                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>

    <div class="cart-summary">

        <div class="cart-total">
            <span>Total:</span>
            <strong>₹ {{ total }}</strong>
        </div>

        <a href="{{ url_for('checkout.checkout') }}" class="checkout-btn">
            Proceed to Checkout
        </a>

    </div>

    {% else %}

        <div class="empty-cart">
            <p>Your cart is empty.</p>
            <a href="{{ url_for('shop.home') }}" class="btn-primary">
                Continue Shopping
            </a>
        </div>

    {% endif %}

</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
{% endblock %}
